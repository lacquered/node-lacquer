extends layout_reservation

block content
    .section
        .container.container-border
            nav.navbar.navbar-ct-azure.navbar-fixed-top(role='navigation')
                .container.text-center
                    .navbar-header2
                        a.navbar-brand(href='/')
                            i.fa.fa-chevron-left
                        .titleBarTxt.text-center 조회 및 수정하기
            br
            br
            br
            br
            .row
                .col-lg-12
                    .form-horizontal
                        .form-group
                            h5.col-xs-3.text-center(for='time') 출발지
                            .col-xs-9
                                select#pSource.mobileSelect(data-title='출발지를 선택해주세요.')
                                    for item in listSource
                                        option(value='#{item}' selected=(pSource == item) ? true : false) #{item}
                        .form-group
                            h5.col-xs-3.text-center(for='date') 일 자
                            .col-xs-9
                                div
                                    input#pDate.form-control.textBorder(type='text', placeholder='클릭하여 선택해 주세요.')
                        .form-group
                            h5.col-xs-3.text-center(for='time') 시 간
                            .col-xs-9
                                select#pTime.mobileSelect(data-title='출발 시간을 선택해주세요.')
                                    for item in listTime
                                        option(value='#{item}' selected=(pTime == item) ? true : false) #{item}
                        .form-group
                            h5.col-xs-3.text-center(for='time') 전화번호
                            .col-xs-9
                                .col-xs-4(style='padding-right: 4px; padding-left: 0px;')
                                    input#pTel1.form-control.textBorder(type='text', pattern='\d*', maxlength='3', style='ime-mode:disabled;', value='#{pTel1}')
                                .col-xs-4(style='padding-right: 2px; padding-left: 2px;')
                                    input#pTel2.form-control.textBorder(type='number', pattern='[0-9]{10}', step='1', maxlength='4', value='#{pTel2}')
                                .col-xs-4(style='padding-right: 0px; padding-left: 4px;')
                                    input#pTel3.form-control.textBorder(type='number', maxlength='4', style='ime-mode:disabled;', value='#{pTel3}')
    .container
        .text-center
            button#btnSearch.btn.btn-primary.btn-lg(type='button')
                | 조 회 하 기

    #resInfo
        .section
            .row
                .col-lg-12
                    .form-group
                        h5.col-xs-3.text-center(for='time') 예약자
                        .col-xs-9
                            input#name.form-control.textBorder(type='text')

        .section.section-gray.section-faq
            .container
                h3.section-title 여객선 예약
                .row
                    .col-lg-12
                        .col-xs-3
                            h5.text-center 성인
                            select#pCnt1.mobileSelect.cntSelect(width='100%', data-title='성인')
                        .col-xs-3
                            h5.text-center 청소년
                            select#pCnt2.mobileSelect.cntSelect(width='100%', data-title='청소년 : 중고등학생')
                        .col-xs-3
                            h5.text-center 소인
                            select#pCnt3.mobileSelect.cntSelect(width='100%', data-title='소인 : 만3세 ~ 초등학생')
                        .col-xs-3
                            h5.text-center 유아
                            select#pCnt4.mobileSelect.cntSelect(width='100%', data-title='유아 : 0 ~ 만2세')
        .section.section-gray.section-faq
            .container
                h3.section-title 식사 예약
                .row
                    .col-lg-12
                        .col-xs-6
                            h5.text-center 메뉴 1 번
                            select#pLunchCnt1.mobileSelect.cntSelect(width='100%', data-title='메뉴 1 번')
                        .col-xs-6
                            h5.text-center 메뉴 2 번
                            select#pLunchCnt2.mobileSelect.cntSelect(width='100%', data-title='메뉴 2 번')
        .container
            br
            br
            .text-center
                button#btnSave.btn.btn-primary.btn-lg(type='button')
                    | 저장하기
                button#btnDelete.btn.btn-primary.btn-lg(type='button')
                    | 삭제하기

    script(src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js')
    script(src='../libs/bootstrap/js/bootstrap.min.js')
    script(src='../libs/pickadate/js/picker.js')
    script(src='../libs/pickadate/js/picker.date.js')
    script(src='../libs/pickadate/js/picker.time.js')
    script(src='../libs/pickadate/js/ko_KR.js')
    script(src='../libs/fullscreenSelect/js/bootstrap-fullscreen-select.min.js')
    script.
        $('#resInfo').hide();

        var $pDate = $('#pDate').pickadate({
            min: true
        }), pDate = $pDate.pickadate('picker');

        $('#btnConfirm1').click(function () {
            var _source = $('#pSource').val()
            var _date = pDate.get('select', 'yyyymmdd');
            var _time = $('#pTime').val();
            var _tel = $('#pTel').val();
            if (!_source) {
                alert('날짜를 입력하세요.');
                return;
            }
            if (!_tel) {
                alert('전화번호를 입력하세요.');
                return;
            }
            // @TODO 서버호출 !!
            $('#resConfirm').hide();
            $('#resInfo').show();
            $('#resSource').text(_source);
            $('#resDateTime').text(pDate.get() + "  (" + _time + ")");
            $('#resTel').text(_tel);
            //var _d = pDate.get('select', 'yyyymmdd');
        });
        $('#btnConfirm2').click(function () {
            var _date = pDate.get('select', 'yyyymmdd');
            var _time = $('#pTime').val();
            var _tel = $('#pTel').val();
        });
        $('#btnCancel').click(function () {
            $('#resConfirm').show();
            $('#resInfo').hide();
        });
        $.mobileSelect.defaults = {
            buttonSave: '선택',
            buttonCancel: '취소',
            theme: 'white',
            onOpen: function () {
            },
            onClose: function () {
            },
            style: 'btn-default'
        };
        for (var i = 0; i < 51; i++) {
            $('.cntSelect').append($('<option>', {
                value: i,
                text: i + " 명"
            }));
        }
        $('.mobileSelect').mobileSelect();

    if pDate
        script.
            pDate.set('select', '#{pDate}', {pDate: 'yyyymmdd'});
